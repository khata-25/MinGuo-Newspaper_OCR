# 民国报纸 OCR 交互式软件使用指南

## 📖 简介
本软件是一款专门用于民国报纸文字识别的交互式桌面应用程序。您可以通过简单的图形界面上传报纸图片，软件会自动进行版面分析和文字识别，并实时显示识别结果。

## ⚙️ 安装与配置

### 方式一：从源码运行（需要 Python 环境）

#### 1. 安装 Python
- 推荐版本：Python 3.9 或更高版本
- 下载地址：https://www.python.org/downloads/

#### 2. 安装依赖
在项目目录下打开命令行/终端，运行：
```bash
pip install -r requirements.txt
```

#### 3. 配置 API 密钥
编辑 `config.json` 文件，填入您的 API 密钥：
```json
{
  "api": {
    "qwen_vl": {
      "api_key": "您的 Qwen VL API 密钥"
    }
  },
  "layout": {
    "api_url": "您的 PaddleOCR-VL API 地址",
    "token": "您的 PaddleOCR-VL API Token"
  }
}
```

#### 4. 启动软件
- **Windows**：双击 `START_INTERACTIVE.bat`
- **Linux/Mac**：运行 `./start_interactive.sh` 或 `python interactive_gui.py`

---

### 方式二：使用打包版本（无需 Python 环境）

#### 1. 获取打包版本
- 从发布页面下载 `MinGuoOCR_Interactive.exe`（Windows）或对应的可执行文件
- 将 `config.json` 放在同一目录下

#### 2. 配置 API 密钥
参考上述配置步骤

#### 3. 启动软件
直接双击可执行文件即可

---

## 🚀 使用步骤

### 步骤 1：选择图片
点击界面顶部的 **"📁 选择图片"** 按钮，从您的电脑中选择要识别的民国报纸图片。

支持的图片格式：
- PNG (.png)
- JPEG (.jpg, .jpeg)
- BMP (.bmp)

### 步骤 2：预览图片
选择图片后，左侧区域会显示图片预览。

### 步骤 3：开始识别
点击 **"🚀 开始识别"** 按钮，软件会自动执行以下操作：

1. **Stage 1 - 版面分割**
   - 对报纸图片进行版面分析
   - 自动检测文字区域、标题、表格等
   - 在预览图上标注识别到的区域（红色边框 + 编号）

2. **Stage 2 - 文字识别**
   - 对每个区域进行 OCR 文字识别
   - 显示识别进度（如"识别中: 5/12 区域"）
   - 识别结果会实时显示在右侧文本框

### 步骤 4：查看结果
识别完成后：
- **左侧**：显示标注了区域的图片
- **右侧**：显示识别出的文字内容（Markdown 格式）
- **进度条**：显示 100% 完成

### 步骤 5：保存结果
点击 **"💾 保存结果"** 按钮，选择保存位置和文件名，将识别结果保存到本地。

建议保存为 `.md` 格式，方便后续编辑和查看。

### 可选：清空重新识别
点击 **"🗑️ 清空"** 按钮，清除当前图片和结果，准备识别新图片。

---

## 📊 界面说明

### 顶部工具栏
- **标题**：软件名称和版本
- **按钮组**：
  - 📁 选择图片：上传要识别的图片
  - 🚀 开始识别：启动识别流程
  - 💾 保存结果：保存识别结果到文件
  - 🗑️ 清空：清除当前内容

### 左侧面板：图片预览
- 显示上传的图片
- 识别完成后会在图片上标注检测到的区域
- 支持滚动查看大图

### 右侧面板：识别结果
- **进度条**：显示当前识别进度
- **进度文字**：显示详细状态（如"识别中: 3/8 区域"）
- **文本框**：显示识别的文字内容

### 底部区域：运行日志
- 记录软件运行过程中的详细信息
- 包括：图片加载、版面分割、区域识别等
- 如遇问题，可从日志中查看错误信息

### 状态栏
- 显示当前软件状态（如"就绪"、"识别中..."、"识别完成"）

---

## ⚠️ 注意事项

### 1. 网络连接
本软件需要联网使用，因为需要调用云端 API 进行识别：
- PaddleOCR-VL API：用于版面分析
- Qwen VL API：用于文字识别

请确保网络连接正常。

### 2. API 配置
首次使用前，**务必**在 `config.json` 中配置正确的 API 密钥和地址，否则无法进行识别。

### 3. 图片要求
- 建议使用清晰的报纸扫描图
- 图片不宜过大（建议宽度不超过 4000 像素）
- 如果图片过大，软件会自动缩放处理

### 4. 识别时间
- 识别时间取决于图片大小和区域数量
- 一般单张图片需要 30 秒到 2 分钟
- 请耐心等待，不要重复点击识别按钮

### 5. 结果准确性
- OCR 识别结果可能存在误差
- 建议识别完成后人工校对
- 复杂版面或模糊图片识别率会降低

---

## 🔧 常见问题

### Q1: 点击"开始识别"后没有反应？
**A:** 请检查：
1. 是否已选择图片
2. `config.json` 是否配置正确
3. 查看底部日志区是否有错误信息
4. 网络连接是否正常

### Q2: 识别结果为空或很少？
**A:** 可能原因：
1. 图片质量不佳（模糊、倾斜等）
2. API 调用失败（查看日志）
3. 版面过于复杂

建议：重新上传清晰图片，或检查 API 配置。

### Q3: 软件卡住不动？
**A:** 
1. 查看进度条和日志，确认是否在识别过程中
2. 如长时间无响应，可关闭软件重新打开
3. 检查网络连接

### Q4: 如何批量识别多张图片？
**A:** 
本交互式软件主要用于单张图片识别。如需批量处理，请使用：
- 命令行工具：`python main_async.py -i 输入目录 -o 输出目录`
- 批量工具箱：运行 `START_GUI.bat`（Windows）

### Q5: 识别结果如何编辑？
**A:** 
识别结果以 Markdown 格式保存，可以使用任何文本编辑器或 Markdown 编辑器打开编辑，如：
- Typora
- VS Code
- 记事本
- 等

---

## 📞 技术支持

如遇问题，可以：
1. 查看项目 README.md 文档
2. 查看软件运行日志（底部日志区）
3. 在 GitHub 仓库提交 Issue

---

## 📝 更新日志

### v1.0 (2024)
- ✨ 首次发布
- ✅ 支持单图片上传识别
- ✅ 实时图片预览和区域标注
- ✅ 实时识别结果显示
- ✅ 进度跟踪
- ✅ 结果保存

---

## 📄 许可证
请参考项目许可证文件。

---

**祝您使用愉快！** 🎉
