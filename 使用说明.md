# 一键运行说明（无需再问）

以下为完整运行指令与常见场景。

## 00 运行安装必须的安装包：
- 安装requirements里的：python -m pip install -r requirements.txt

## 1. 标准批量运行
在项目根目录执行：
python main.py -i images/42 -o output/full_batch_run_42
- 异步调用运行：python main_async.py -i images/42 -o output/full_batch_run_42

### 1.1 标准批量运行（推荐：异步增强版）
如果遇到网络不稳定或 API 错误，请运行新建的异步调用程序：
python main_async.py -i images/42 -o output/full_batch_run_42

## 2. 重新全量运行（忽略断点续传）
python main.py -i images/01 -o output/full_batch_run_01 --no-resume

## 3. 仅执行版面切割（Stage 1）
python main.py -i images/01 -o output/full_batch_run_01 --stage 1

## 4. 仅执行识别合并（Stage 2）
python main.py -i output/full_batch_run_17 -o output/full_batch_run_17 --stage 2

## 5. 结果位置
- 单页结果：output/full_batch_run_01/<图片名>.md
- 合并结果：output/full_batch_run_01/merged_all.md

## 6. 出错处理建议
- 网络超时：直接重跑同命令即可（断点续传会跳过已完成文件）
- API 限流：适当降低并发参数 concurrency

## 7、识别失败页面修复识别（推荐：异步增强版）
- 针对 PaddleOCR 同步接口不稳定的情况，修复程序已升级为异步调用 API。
- 该程序会自动扫描失败的任务（如 API 500/403 错误或结果为空），并提交异步任务进行修复，稳定性更高。
- 运行修复：python fix_failed_images.py -i images/42 -o output/full_batch_run_42

## 8、批量运行子文件夹-运行前修改代码文件中的批量文件名
- 运行：python batch_runner.py
- 运行修复批量stage2：python batch_runner_stage2.py
- 运行批量修复：python batch_fix_runner.py

## 9、可视化
- 安装：pip install streamlit
- 运行：streamlit run visualize.py

PaddleOCR-VL API 失败: 500 {..., "requestId":"05ca433f-478"}